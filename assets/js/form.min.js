class FormSubmit{constructor(t){this.settings=t,this.form=document.querySelector(t.form),this.formButton=document.querySelector(t.button),this.form&&(this.url=this.form.getAttribute("action")),this.sendForm=this.sendForm.bind(this)}displaySuccess(){this.form.innerHTML=this.settings.success}displayError(){this.form.innerHTML=this.settings.error}getFormObject(){const t={},s=this.form.querySelectorAll("[name]");return s.forEach(s=>{t[s.getAttribute("name")]=s.value}),console.log("#objeto",t),t}onSubmission(t){t.preventDefault(),t.target.disabled=!0,t.target.innerText="Enviando..."}async sendForm(t){try{this.onSubmission(t),await fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(this.getFormObject())}),this.displaySuccess()}catch(t){throw this.displayError(),new Error(t)}}init(){return this.form&&this.formButton.addEventListener("click",this.sendForm),this}}const formSubmit=new FormSubmit({form:"[data-form]",button:"[data-button]",success:"<h1 class='success'>Mensagem enviada!</h1>",error:"<h1 class='error'>Não foi possível enviar sua mensagem.</h1>"});formSubmit.init();